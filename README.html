<h1 id="xe.py"><strong><em>XE.PY</em></strong></h1>
<h3 id="what-is-it"><strong>What is it?</strong></h3>
<p>xe.py adds clickable buttons with PNG icons to your desktop system
tray.</p>
<h3 id="what-does-it-look-like"><strong>What does it look
like?</strong></h3>
<p>Hereâ€™s my i3 tray with xe.py doing its thing (look at the red
arrow):</p>
<p><img src="bar.png" title="i3bar with xe.py" /></p>
<h2 id="will-it-work-for-me"><strong>Will it work for me?</strong></h2>
<p>Standard desktop environments usually include this feature
natively.</p>
<p>This was mostly designed for i3wm which does not.</p>
<p>However, xe.py has been tested and seems to work fine on the
following desktop environments:</p>
<ul>
<li>i3wm</li>
<li>cinnamon</li>
<li>ubuntu unity</li>
</ul>
<p>Generally speaking, if your system tray speaks the xembed protocol, I
expect xe.py to work out of the box (caveat emptor: it wonâ€™t work on
wayland).</p>
<p>Easiest way to check if it works for you:</p>
<ul>
<li>install it (see below)</li>
<li>change xeconfig.json to point at valid icon files and valid
applications on your machine</li>
<li>launch: ./xe.py</li>
<li>ignore annoying warning messages about deprecated GTK APIs</li>
<li>see if new buttons show up in your tray</li>
<li>if they do, click on them, see what happens</li>
</ul>
<h2 id="why"><strong>Why?</strong></h2>
<p>When I write code, my - by far - prefered environments are tiling
window managers.</p>
<p>Specifically, I use: <a href="https://i3wm.org/">i3wm</a></p>
<p>However, the original author of i3wm as well as its subsequent
maintainers subscribe to a strict minimalist philosophy whereby
everything is supposed to be done via the keyboard and displaying little
pictures in the status bar generally seems to be considered bad taste
ðŸ˜ƒ</p>
<p>I am in fact in general agreement with that philosophy, with one
exception:</p>
<ul>
<li><p>I code on a laptop with a touchpad, which means a button click is
<em>far</em> less costly (in terms of speed and muscle use) than it is
with a mouse.</p></li>
<li><p>for apps used super often (e.g.Â terminals via $mod+enter)
keyboard shortcuts is indeed <strong>The Way</strong>.</p></li>
<li><p>for somewhat rarely used apps, launching them via <a
href="https://tools.suckless.org/dmenu/">dmenu</a> or <a
href="https://xlunch.org/">xlunch</a>, or any of the plethora of similar
utilities, using $mod+d is a perfectly fine choice.</p></li>
<li><p>there is however a very short list of apps that fall exactly in
the cracks separating these two cases:</p>
<ul>
<li><p>apps launched often enough that using $mod+d launching is a giant
PITN (too slow)</p></li>
<li><p>but apps launched not often enough that the cognitive load of
committing a keyoard shortcut to memory for each is simply not worth the
exertion.</p></li>
</ul></li>
<li><p>It looks like I am not the only one feeling this way, and there
are a number of existing solutions to the problem that make some areas
of the i3 status bar clickable and can launch stuff.</p>
<p><em>However</em>: they all share one major shortcoming (my biased
opinion): because the i3 status bar can only (by deliberate design
choice of the i3 authors) display text, and all these solutions are very
far from aesthetically pleasing. They are also much harder to spot
quickly than icons.</p>
<p>Yes, there are workarounds e.g.Â using hacked fonts that display
little drawings instead of letters. Again, my own opinion here, but â€¦
these are still not very nice, still hard to spot quickly because
theyâ€™re B&amp;W.</p>
<p>Actual pictures are:</p>
<ul>
<li><em>way</em> nicer</li>
<li><em>way</em> faster to spot visually</li>
</ul></li>
</ul>
<p>So as a result, Iâ€™ve been wanting to scratch this specific itch
probably for the better part of 10 years.</p>
<p>xe.py is the outcome, and, sure, not a perfect one (itâ€™s hackish,
probably violates a large number of UI design guidelines, can only
insert buttons in the tray and nowhere else, etcâ€¦), but â€¦ itch
scratched, I can finaly launch apps from nicely rendered clickable
buttons in the i3 status bar.</p>
<h2 id="the-good"><strong>The good</strong></h2>
<ul>
<li>does the job</li>
<li>moderate amount of dependencies</li>
<li>lightweight: 1 small python script, 1 config file</li>
</ul>
<h2 id="the-bad"><strong>The bad</strong></h2>
<ul>
<li>likely wonâ€™t work on wayland</li>
<li>purposefully violates the intended purpose of the system tray</li>
<li>currently forks one instance of xe.py per button (may be
fixable)</li>
<li>relies on a old-ish protocol (xembed) that might or might not
survive the next decade</li>
<li>a little bit of an ugly hack: script curently calls itself to work
around the fact that os.fork() gives modern python the hives</li>
</ul>
<h2 id="installation"><strong>Installation</strong></h2>
<pre><code>  sudo apt install gir1.2-appindicator3-0.1
  git clone https://github.com/emogenet/xe.git
  cd xe
  pip3 install -f requirements.txt
  /usr/bin/python3 ./xe.py</code></pre>
<ul>
<li>todo : check on a clean VM</li>
<li>pygobject</li>
<li>requirements.txt</li>
</ul>
